{"ast":null,"code":"import * as THREE from \"three\";\nimport gsap from \"gsap\";\nimport vertex from \"@/shader/lightWall/vertex.glsl\";\nimport fragment from \"@/shader/lightWall/fragment.glsl\";\nexport default class LightWall {\n  constructor(radius = 5, length = 2, position = {\n    x: 0,\n    z: 0\n  }, color = 0xff0000) {\n    this.geometry = new THREE.CylinderGeometry(radius, radius, 2, 32, 1, true);\n    this.material = new THREE.ShaderMaterial({\n      vertexShader: vertex,\n      fragmentShader: fragment,\n      transparent: true,\n      side: THREE.DoubleSide\n    });\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\n    this.mesh.position.set(position.x, 1, position.z);\n    this.mesh.geometry.computeBoundingBox();\n    //   console.log(mesh.geometry.boundingBox);\n\n    let {\n      min,\n      max\n    } = this.mesh.geometry.boundingBox;\n    //   获取物体的高度差\n    let uHeight = max.y - min.y;\n    this.material.uniforms.uHeight = {\n      value: uHeight\n    };\n\n    // 光墙动画\n    gsap.to(this.mesh.scale, {\n      x: length,\n      z: length,\n      duration: 1,\n      repeat: -1,\n      yoyo: true\n    });\n  }\n  remove() {\n    this.mesh.remove();\n    this.mesh.removeFromParent();\n    this.mesh.geometry.dispose();\n    this.mesh.material.dispose();\n  }\n}","map":{"version":3,"names":["THREE","gsap","vertex","fragment","LightWall","constructor","radius","length","position","x","z","color","geometry","CylinderGeometry","material","ShaderMaterial","vertexShader","fragmentShader","transparent","side","DoubleSide","mesh","Mesh","set","computeBoundingBox","min","max","boundingBox","uHeight","y","uniforms","value","to","scale","duration","repeat","yoyo","remove","removeFromParent","dispose"],"sources":["E:/three.js/three.js-demo/three-city/city/src/three/mesh/LightWall.js"],"sourcesContent":["import * as THREE from \"three\";\r\nimport gsap from \"gsap\";\r\nimport vertex from \"@/shader/lightWall/vertex.glsl\";\r\nimport fragment from \"@/shader/lightWall/fragment.glsl\";\r\n\r\nexport default class LightWall {\r\n  constructor(\r\n    radius = 5,\r\n    length = 2,\r\n    position = { x: 0, z: 0 },\r\n    color = 0xff0000\r\n  ) {\r\n    this.geometry = new THREE.CylinderGeometry(\r\n      radius,\r\n      radius,\r\n      2,\r\n      32,\r\n      1,\r\n      true\r\n    );\r\n    this.material = new THREE.ShaderMaterial({\r\n      vertexShader: vertex,\r\n      fragmentShader: fragment,\r\n      transparent: true,\r\n      side: THREE.DoubleSide,\r\n    });\r\n\r\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\r\n    this.mesh.position.set(position.x, 1, position.z);\r\n    this.mesh.geometry.computeBoundingBox();\r\n    //   console.log(mesh.geometry.boundingBox);\r\n\r\n    let { min, max } = this.mesh.geometry.boundingBox;\r\n    //   获取物体的高度差\r\n    let uHeight = max.y - min.y;\r\n    this.material.uniforms.uHeight = {\r\n      value: uHeight,\r\n    };\r\n\r\n    // 光墙动画\r\n    gsap.to(this.mesh.scale, {\r\n      x: length,\r\n      z: length,\r\n      duration: 1,\r\n      repeat: -1,\r\n      yoyo: true,\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    this.mesh.remove();\r\n    this.mesh.removeFromParent();\r\n    this.mesh.geometry.dispose();\r\n    this.mesh.material.dispose();\r\n  }\r\n}\r\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,MAAM,MAAM,gCAAgC;AACnD,OAAOC,QAAQ,MAAM,kCAAkC;AAEvD,eAAe,MAAMC,SAAS,CAAC;EAC7BC,WAAWA,CACTC,MAAM,GAAG,CAAC,EACVC,MAAM,GAAG,CAAC,EACVC,QAAQ,GAAG;IAAEC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,EACzBC,KAAK,GAAG,QAAQ,EAChB;IACA,IAAI,CAACC,QAAQ,GAAG,IAAIZ,KAAK,CAACa,gBAAgB,CACxCP,MAAM,EACNA,MAAM,EACN,CAAC,EACD,EAAE,EACF,CAAC,EACD,IACF,CAAC;IACD,IAAI,CAACQ,QAAQ,GAAG,IAAId,KAAK,CAACe,cAAc,CAAC;MACvCC,YAAY,EAAEd,MAAM;MACpBe,cAAc,EAAEd,QAAQ;MACxBe,WAAW,EAAE,IAAI;MACjBC,IAAI,EAAEnB,KAAK,CAACoB;IACd,CAAC,CAAC;IAEF,IAAI,CAACC,IAAI,GAAG,IAAIrB,KAAK,CAACsB,IAAI,CAAC,IAAI,CAACV,QAAQ,EAAE,IAAI,CAACE,QAAQ,CAAC;IACxD,IAAI,CAACO,IAAI,CAACb,QAAQ,CAACe,GAAG,CAACf,QAAQ,CAACC,CAAC,EAAE,CAAC,EAAED,QAAQ,CAACE,CAAC,CAAC;IACjD,IAAI,CAACW,IAAI,CAACT,QAAQ,CAACY,kBAAkB,CAAC,CAAC;IACvC;;IAEA,IAAI;MAAEC,GAAG;MAAEC;IAAI,CAAC,GAAG,IAAI,CAACL,IAAI,CAACT,QAAQ,CAACe,WAAW;IACjD;IACA,IAAIC,OAAO,GAAGF,GAAG,CAACG,CAAC,GAAGJ,GAAG,CAACI,CAAC;IAC3B,IAAI,CAACf,QAAQ,CAACgB,QAAQ,CAACF,OAAO,GAAG;MAC/BG,KAAK,EAAEH;IACT,CAAC;;IAED;IACA3B,IAAI,CAAC+B,EAAE,CAAC,IAAI,CAACX,IAAI,CAACY,KAAK,EAAE;MACvBxB,CAAC,EAAEF,MAAM;MACTG,CAAC,EAAEH,MAAM;MACT2B,QAAQ,EAAE,CAAC;MACXC,MAAM,EAAE,CAAC,CAAC;MACVC,IAAI,EAAE;IACR,CAAC,CAAC;EACJ;EAEAC,MAAMA,CAAA,EAAG;IACP,IAAI,CAAChB,IAAI,CAACgB,MAAM,CAAC,CAAC;IAClB,IAAI,CAAChB,IAAI,CAACiB,gBAAgB,CAAC,CAAC;IAC5B,IAAI,CAACjB,IAAI,CAACT,QAAQ,CAAC2B,OAAO,CAAC,CAAC;IAC5B,IAAI,CAAClB,IAAI,CAACP,QAAQ,CAACyB,OAAO,CAAC,CAAC;EAC9B;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}