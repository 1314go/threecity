{"ast":null,"code":"import * as THREE from \"three\";\nexport default function modifyCityMaterial(mesh) {\n  mesh.geometry.computeBoundingBox();\n  console.log(mesh.geometry.boundingBox);\n  let {\n    min,\n    max\n  } = mesh.geometry.boundingBox;\n  //获取物体高度差\n  let uHeight = max.y - min.y;\n  mesh.material.onBeforeCompile = shader => {\n    console.log(shader.vertexShader);\n    console.log(shader.fragmentShader);\n    shader.uniforms.uTopColor = {\n      value: new THREE.Color(\"#aaaeff\")\n    };\n    shader.uniforms.uHeight = {\n      value: uHeight\n    };\n    shader.vertexShader = shader.vertexShader.replace(\"#include <common>\", `\n        #include <common>\n        varying vec3 vPosition;\n        `);\n    shader.vertexShader = shader.vertexShader.replace(\"#include <common>\", `\n      #include <common>\n      \n      uniform vec3 uTopColor;\n      uniform float uHeight;\n      varying vec3 vPosition;\n\n        `);\n    shader.fragmentShader = shader.fragmentShader.replace();\n  };\n}","map":{"version":3,"names":["THREE","modifyCityMaterial","mesh","geometry","computeBoundingBox","console","log","boundingBox","min","max","uHeight","y","material","onBeforeCompile","shader","vertexShader","fragmentShader","uniforms","uTopColor","value","Color","replace"],"sources":["E:/three.js/three.js-demo/three-city/city/src/three/modify/modifyCityMaterial.js"],"sourcesContent":["\r\nimport * as THREE from \"three\";\r\n\r\nexport default function modifyCityMaterial( mesh){\r\n\r\n  mesh.geometry.computeBoundingBox();\r\n  console.log(mesh.geometry.boundingBox);\r\n  \r\n  let {min,max}=mesh.geometry.boundingBox;\r\n//获取物体高度差\r\n  let uHeight = max.y-min.y;\r\n\r\n\r\n\r\n  mesh.material.onBeforeCompile = (shader) =>{\r\n    console.log(shader.vertexShader);\r\n    console.log(shader.fragmentShader);\r\n    shader.uniforms.uTopColor = {\r\n      value: new THREE.Color(\"#aaaeff\"),\r\n    };\r\n\r\n    shader.uniforms.uHeight = {\r\n      value: uHeight,\r\n    };\r\n    shader.vertexShader = shader.vertexShader.replace(\r\n      \"#include <common>\",\r\n      `\r\n        #include <common>\r\n        varying vec3 vPosition;\r\n        `\r\n    );\r\n  \r\n    shader.vertexShader = shader.vertexShader.replace(\r\n     \"#include <common>\",\r\n    `\r\n      #include <common>\r\n      \r\n      uniform vec3 uTopColor;\r\n      uniform float uHeight;\r\n      varying vec3 vPosition;\r\n\r\n        `\r\n    );\r\n    shader.fragmentShader=shader.fragmentShader.replace(\r\n     \r\n        \r\n\r\n    );\r\n  };\r\n}"],"mappings":"AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,eAAe,SAASC,kBAAkBA,CAAEC,IAAI,EAAC;EAE/CA,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAAC,CAAC;EAClCC,OAAO,CAACC,GAAG,CAACJ,IAAI,CAACC,QAAQ,CAACI,WAAW,CAAC;EAEtC,IAAI;IAACC,GAAG;IAACC;EAAG,CAAC,GAACP,IAAI,CAACC,QAAQ,CAACI,WAAW;EACzC;EACE,IAAIG,OAAO,GAAGD,GAAG,CAACE,CAAC,GAACH,GAAG,CAACG,CAAC;EAIzBT,IAAI,CAACU,QAAQ,CAACC,eAAe,GAAIC,MAAM,IAAI;IACzCT,OAAO,CAACC,GAAG,CAACQ,MAAM,CAACC,YAAY,CAAC;IAChCV,OAAO,CAACC,GAAG,CAACQ,MAAM,CAACE,cAAc,CAAC;IAClCF,MAAM,CAACG,QAAQ,CAACC,SAAS,GAAG;MAC1BC,KAAK,EAAE,IAAInB,KAAK,CAACoB,KAAK,CAAC,SAAS;IAClC,CAAC;IAEDN,MAAM,CAACG,QAAQ,CAACP,OAAO,GAAG;MACxBS,KAAK,EAAET;IACT,CAAC;IACDI,MAAM,CAACC,YAAY,GAAGD,MAAM,CAACC,YAAY,CAACM,OAAO,CAC/C,mBAAmB,EACnB;AACN;AACA;AACA,SACI,CAAC;IAEDP,MAAM,CAACC,YAAY,GAAGD,MAAM,CAACC,YAAY,CAACM,OAAO,CAChD,mBAAmB,EACpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,SACI,CAAC;IACDP,MAAM,CAACE,cAAc,GAACF,MAAM,CAACE,cAAc,CAACK,OAAO,CAInD,CAAC;EACH,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}