{"ast":null,"code":"import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport * as THREE from \"three\";\nimport scene from \"../scene\";\nimport modifyCityMaterial from \"../modify/modifyCityMaterial\";\nimport FlyLine from \"./FlyLine\";\nimport FlyLineShader from \"./FlyLineShader\";\nimport MeshLine from \"./MeshLine\";\nimport LightWall from \"./LightWall\";\nimport LightRadar from \"./LightRadar\";\nimport AlarmSprite from \"./AlarmSprite\";\nexport default function createCity() {\n  const gltfLoader = new GLTFLoader();\n  gltfLoader.load(\"./model/city.glb\", gltf => {\n    console.log(gltf);\n    gltf.scene.traverse(item => {\n      console.log(item);\n      if (item.type === \"Mesh\") {\n        const cityMaterial = new THREE.MeshBasicMaterial({\n          color: new THREE.Color(0x00FFFF)\n        });\n        item.material = cityMaterial;\n        modifyCityMaterial(item);\n        if (item.name == \"Layerbuildings\") {\n          const meshLine = new MeshLine(item.geometry);\n          const size = item.scale.x;\n          meshLine.mesh.scale.set(size, size, size);\n          scene.add(meshLine.mesh);\n        }\n      }\n    });\n    scene.add(gltf.scene);\n    const flyLine = new FlyLine();\n    scene.add(flyLine.mesh);\n    // 添加着色器飞线\n    const flyLineShader = new FlyLineShader();\n    scene.add(flyLineShader.mesh);\n\n    //添加光墙\n    const lightWall = new LightWall();\n    scene.add(lightWall.mesh);\n    //添加雷达\n    const lightRadar = new LightRadar();\n    scene.add(lightRadar.mesh);\n  });\n}","map":{"version":3,"names":["GLTFLoader","THREE","scene","modifyCityMaterial","FlyLine","FlyLineShader","MeshLine","LightWall","LightRadar","AlarmSprite","createCity","gltfLoader","load","gltf","console","log","traverse","item","type","cityMaterial","MeshBasicMaterial","color","Color","material","name","meshLine","geometry","size","scale","x","mesh","set","add","flyLine","flyLineShader","lightWall","lightRadar"],"sources":["E:/three.js/three.js-demo/three-city/city/src/three/mesh/City.js"],"sourcesContent":["import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport * as THREE from \"three\";\r\nimport scene from \"../scene\";\r\nimport modifyCityMaterial from \"../modify/modifyCityMaterial\";\r\nimport FlyLine from \"./FlyLine\";\r\nimport FlyLineShader from \"./FlyLineShader\";\r\nimport MeshLine from \"./MeshLine\";\r\nimport LightWall from \"./LightWall\";\r\nimport LightRadar from \"./LightRadar\";\r\nimport AlarmSprite from \"./AlarmSprite\";\r\n\r\n\r\nexport default function createCity() {\r\n  const gltfLoader = new GLTFLoader();\r\n  gltfLoader.load(\"./model/city.glb\",  (gltf)=> {\r\n    console.log(gltf);\r\n\r\n    gltf.scene.traverse((item)=>{\r\n      console.log(item);\r\n      if(item.type === \"Mesh\"){\r\n        const cityMaterial = new THREE.MeshBasicMaterial({\r\n          color: new THREE.Color(0x00FFFF),\r\n        });\r\n        item.material = cityMaterial;\r\n        modifyCityMaterial(item);\r\n        if(item.name == \"Layerbuildings\"){\r\n          const meshLine = new MeshLine(item.geometry);\r\n          const size = item.scale.x;\r\n          meshLine.mesh.scale.set(size,size,size);\r\n          scene.add(meshLine.mesh);\r\n        }\r\n      }\r\n\r\n    });\r\n      scene.add(gltf.scene);\r\n      const flyLine = new FlyLine();\r\n      scene.add(flyLine.mesh);\r\n    // 添加着色器飞线\r\n      const flyLineShader = new FlyLineShader();\r\n      scene.add(flyLineShader.mesh);\r\n  \r\n      //添加光墙\r\n      const lightWall = new LightWall();\r\n      scene.add(lightWall.mesh);\r\n      //添加雷达\r\n      const lightRadar = new LightRadar();\r\n      scene.add(lightRadar.mesh);\r\n  });\r\n\r\n}\r\n  \r\n    "],"mappings":"AAAA,SAASA,UAAU,QAAQ,uCAAuC;AAClE,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,kBAAkB,MAAM,8BAA8B;AAC7D,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,WAAW,MAAM,eAAe;AAGvC,eAAe,SAASC,UAAUA,CAAA,EAAG;EACnC,MAAMC,UAAU,GAAG,IAAIX,UAAU,CAAC,CAAC;EACnCW,UAAU,CAACC,IAAI,CAAC,kBAAkB,EAAIC,IAAI,IAAI;IAC5CC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IAEjBA,IAAI,CAACX,KAAK,CAACc,QAAQ,CAAEC,IAAI,IAAG;MAC1BH,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC;MACjB,IAAGA,IAAI,CAACC,IAAI,KAAK,MAAM,EAAC;QACtB,MAAMC,YAAY,GAAG,IAAIlB,KAAK,CAACmB,iBAAiB,CAAC;UAC/CC,KAAK,EAAE,IAAIpB,KAAK,CAACqB,KAAK,CAAC,QAAQ;QACjC,CAAC,CAAC;QACFL,IAAI,CAACM,QAAQ,GAAGJ,YAAY;QAC5BhB,kBAAkB,CAACc,IAAI,CAAC;QACxB,IAAGA,IAAI,CAACO,IAAI,IAAI,gBAAgB,EAAC;UAC/B,MAAMC,QAAQ,GAAG,IAAInB,QAAQ,CAACW,IAAI,CAACS,QAAQ,CAAC;UAC5C,MAAMC,IAAI,GAAGV,IAAI,CAACW,KAAK,CAACC,CAAC;UACzBJ,QAAQ,CAACK,IAAI,CAACF,KAAK,CAACG,GAAG,CAACJ,IAAI,EAACA,IAAI,EAACA,IAAI,CAAC;UACvCzB,KAAK,CAAC8B,GAAG,CAACP,QAAQ,CAACK,IAAI,CAAC;QAC1B;MACF;IAEF,CAAC,CAAC;IACA5B,KAAK,CAAC8B,GAAG,CAACnB,IAAI,CAACX,KAAK,CAAC;IACrB,MAAM+B,OAAO,GAAG,IAAI7B,OAAO,CAAC,CAAC;IAC7BF,KAAK,CAAC8B,GAAG,CAACC,OAAO,CAACH,IAAI,CAAC;IACzB;IACE,MAAMI,aAAa,GAAG,IAAI7B,aAAa,CAAC,CAAC;IACzCH,KAAK,CAAC8B,GAAG,CAACE,aAAa,CAACJ,IAAI,CAAC;;IAE7B;IACA,MAAMK,SAAS,GAAG,IAAI5B,SAAS,CAAC,CAAC;IACjCL,KAAK,CAAC8B,GAAG,CAACG,SAAS,CAACL,IAAI,CAAC;IACzB;IACA,MAAMM,UAAU,GAAG,IAAI5B,UAAU,CAAC,CAAC;IACnCN,KAAK,CAAC8B,GAAG,CAACI,UAAU,CAACN,IAAI,CAAC;EAC9B,CAAC,CAAC;AAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}